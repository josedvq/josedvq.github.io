<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">One post tagged with &quot;icarus&quot; | Jose Vargas-Quiros</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://josedvq.github.io/blog/tags/icarus"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="One post tagged with &quot;icarus&quot; | Jose Vargas-Quiros"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://josedvq.github.io/blog/tags/icarus"><link data-rh="true" rel="alternate" href="https://josedvq.github.io/blog/tags/icarus" hreflang="en"><link data-rh="true" rel="alternate" href="https://josedvq.github.io/blog/tags/icarus" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jose Vargas-Quiros RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jose Vargas-Quiros Atom Feed">



<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.2.0/css/fontawesome.css" media="print" onload="this.media=&quot;all&quot;">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.2.0/css/all.css" media="print" onload="this.media=&quot;all&quot;">
<script src="https://cdn.lightwidget.com/widgets/lightwidget.js"></script><link rel="stylesheet" href="/assets/css/styles.b2da171a.css">
<link rel="preload" href="/assets/js/runtime~main.ffa9b863.js" as="script">
<link rel="preload" href="/assets/js/main.a6941c66.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/me.jpg" alt="Jose David Vargas" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/me.jpg" alt="Jose David Vargas" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jose Vargas</b></a><a class="navbar__item navbar__link" docid="projects" href="/projects">Projects</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" docid="cv" href="/cv">CV</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/josedvq" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/responsive-css-triangles">Responsive CSS triangles</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/c-puzzles">C Puzzles Part 1</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/getting-started-icarus-verilog">Getting started with Icarus Verilog on Windows</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>One post tagged with &quot;icarus&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/getting-started-icarus-verilog">Getting started with Icarus Verilog on Windows</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2013-08-25T00:00:00.000Z" itemprop="datePublished">August 25, 2013</time> Â· <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/josedvq" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars0.githubusercontent.com/u/1315101?s=400&amp;v=4" alt="Jose Vargas"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/josedvq" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jose Vargas</span></a></div><small class="avatar__subtitle" itemprop="description">Engineer</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><a href="http://iverilog.icarus.com/" target="_blank" rel="noopener noreferrer" title="Icarus Verilog official website">Icarus Verilog</a> is a <a href="http://en.wikipedia.org/wiki/Verilog" target="_blank" rel="noopener noreferrer" title="Article on Verilog Hardware Description Language">Verilog standard IEEE-1364</a> compiler that targets Linux but works almost as well on Windows. It&#x27;s lightweight, free software and includes a virtual machine that simulates the design. This tutorial goes through the process of downloading, installing and using Icarus Verilog to write a simple program, compile it, simulate it and view the simulation results on a timing diagram. It assumes no previous knowledge on Verilog, but prior programming experience is recommended.<h2>Installing Icarus Verilog</h2><p>Download Icarus Verilog latest stable release for Windows from: <a href="http://bleyer.org/icarus/" target="_blank" rel="noopener noreferrer" title="Get Icarus Verilog for Windows">bleyer.org/icarus</a></p><p>Installing Icarus Verilog is as easy as installing any other Windows program. Just hit next, but be sure to select GTK Wave (full installation) and &quot;Add Executables to Windows Path&quot; option. You should be able to use it from a Command Prompt by now. On Windows Vista/7/8 press Windows key and type cmd to open a command prompt. Just type &quot;iverilog&quot; and you should get a message saying &quot;iverilog: no source files&quot; and some instructions. Type &quot;gtkwave&quot; and the GTKWave GUI should open. This program is used to view the simulation results graphically on a timing diagram.</p><p>If these commands are not recognized but the installation was successful chances are the executables were not added to Windows Path. See <a href="http://www.computerhope.com/issues/ch000549.htm" target="_blank" rel="noopener noreferrer" title="How to set the Path on Windows">How to set the Path on Windows</a> to add &quot;C:\iverilog\bin&quot; to Path manually.</p><h2>Writing a simple program</h2><p>Now you are ready to write your first Verilog program. For this tutorial we&#x27;ll write a D type flip-flop description, that is, a Verilog module that works like a D flip-flop. At the same time you&#x27;ll learn some of the basic Verilog concepts by example.Â  You&#x27;ll also write a tester module to reproduce the following D flip-flop timing diagram:</p><img loading="lazy" class="aligncenter size-full wp-image-139" alt="D type flip-flop timing diagram" src="http://localhost:8888/cid/wp-content/uploads/2013/08/fftiming.gif" width="475" height="257" class="img_ev3q"><p>Verilog programs are separated in modules, which are functional blocks that have inputs, outputs and internal logic. You can think of them like the blocks on a circuit&#x27;s block diagram, but in this case they work. There are two types of Verilog modules: behavioral modules and structural modules. Both may have the same behaviour but are different in the way they are written as you&#x27;ll see throughout the example.</p><p>For the flip-flop program three modules are used: the flip-flop module, tester module and testbench module. The last two are modules you&#x27;ll need on almost every design in order to test your circuit.</p><h3>Flip-flop module</h3><p>Represents a simple D type flip-flop. Receives a clock signal and D signal as inputs and outputs Q and QN signals. The outputs may change on the positive clock edge. The code for this module is:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">module dff(d,clk,q,qn);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input d,clk;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    output q,qn;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    reg q,qn;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Initialize flip-flop outputs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    initial begin q=0; qn=1; end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Change output on positive clock edge</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    always @(posedge clk) </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    begin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        q &amp;lt;= d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        qn &amp;lt;= !d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>From this code, you can see the basic structure of every Verilog module. It starts with a declaration: <code>module dff(d,clk,q,qn);</code> and ends with <code>endmodule</code>. The declaration states the module&#x27;s name and both its inputs and outputs. In the module we must declare which variables are inputs and which are outputs, using &quot;input&quot; and &quot;output&quot;.</p><p>Variables in Verilog are wires or regs. A wire, like a real wire, has no memory. Thus Verilog wire variables do not retain their values by themselves. The reg keyword gives variables the ability to hold their values after they are assigned, until their value is changed, of course. We want this behaviour for the flip-flop&#x27;s outputs so q and qn are defined as regs. If we use a wire the output is never seen by other blocks. It loses its value immediatly after any assignment. There is no need to define variables as wires, because they are all wires by default.</p><p>The way the inner logic of the module is written deppends on wether it is behavioral or structural. The flip-flop module is an example of behavioral code. That is, you describe the behavior the module should have. To do it, use initial and always blocks. The code within an initial block is executed once, when the flip-flop is created. In the example it&#x27;s used to define q=0 and qn=1 initially. By default in Verilog the variables are undefined (represented by an &quot;x&quot;), not zero, not one. If we did&#x27;nt use this initial block q and qn would be left undefined until they are assigned for the first time.</p><p>The code within an always block is executed when a condition is met. In this case, when the clock has a positive edge, q and qn are reassigned. This describes completely the flip-flop&#x27;s logic. As you can see, it is simple. When the condition is not met, Verilog keeps the outputs&#x27; values.</p><p>As a rule of thumb, when writing a behavioral module, define outputs as wires.</p><p>Verilog has control structures like while, if-else, case, for and repeat (similar to for) like most programming languages. These assist you on writting your behavioral code. For example, replacing the flip-flop module&#x27;s always block by:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">begin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(clk == 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    begin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        q &amp;lt;= d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        qn &amp;lt;= !d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>produces exactly the same behaviour. Some things changed. Now the always condition is <code>always @(clk) </code> instead of <code>always @(posedge clk) </code>. This means that now the always block is executed every time clk changes its value, on positive and negative edges. An always block can be triggered by any number of variables. For example, <code>@(clk or d)</code> would trigger it whenever clk or d change. This is used in combinational logic where the output is recalculated whenever an input changes. Back to the example, if <code>clk == 1</code> then the edge is positive. We check it using an if statement. Note that adding the &quot;begin&quot; and &quot;end&quot; keywords is necessary when any block (always, initial, if, for...) has more than one instruction. If omitted for the &quot;if&quot; statement above the second instruction: <code>qn <!-- -->&lt;<!-- -->= !d;</code> would be executed always (it would be ouside of the if statement). These two keywords act like the curly brackets on many programming languages.</p><h3>Tester module</h3><p>This module tests the flip-flop by generating the clock and D signal of the timing diagram above and dumping the Q and QN signals of the flip-flop. It&#x27;s outputs are the flip-flop&#x27;s inputs and viceversa.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">flip-flop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module tester(q,qn,clk,d);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    input q,qn;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    output clk,d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    reg clk,d;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Run the test once</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    initial</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    begin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        clk=0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //Dump results of the simulation to ff.cvd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        $dumpfile(&quot;dff.vcd&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        $dumpvars;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        //Generate input signal d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           d=0; #9 d=1; #1 d=0; #1 d=1; #2 d=0; #1 d=1; #12 d=0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        #1 d=1; #2 d=0; #1 d=1; #1 d=0; #1 d=1; #1 d=0; # 7 d=1;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        #8 $finish;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    //Generate periodic clock signal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    always</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    begin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        #4 clk=!clk;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endmodule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This module is behavioral too as we have initial and always blocks. You should be able to undestand most of the code. However, there are a few new concepts here. The $dumpfile and $dumpvars commands tell the Verilog simulator (more on this ahead) to log the module&#x27;s variables to the specified file, &quot;dff.vcd&quot; in this case. You may also be wondering what the #s do. These are Verilog delays. The delay the following instruction by a given amount of time. For example, <code>#4 clk=!clk;</code> within an always block changes &quot;clk&quot; every four time units from 0 to 1, producing a square wave. The time unit is a second by default.</p><p>Without using delays there is no way of making the program work. This is the way to control time in the design. You may add delays to any instruction. For example, you could model the flip-flop&#x27;s delay by adding some to its always block. It&#x27;s now easy to understand how the <code>d=0; #9 d=1; #1 d=0; #1 d=1; ...</code> lines produce the D signal we want.</p><p>Finally, the $finish command tells the simulator to stop the simulation once the D signal was generated. If this command was omitted the simulation would continue indefinetly because this time the always block has no condition (there is no @ like in the flip-flop module).</p><h3>Testbench module</h3><p>This module just connects the tester module to the flip-flop module:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">module</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">module testbench;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    wire clk,d,q,qn;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    dff ff1(d,clk,q,qn);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tester tst1(q,qn,clk,d);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">endmodule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is the most simple of the modules, but it&#x27;s very different. This time it&#x27;s structural code, that is, you define the structure of the circuit. It&#x27;s like describing the circuit diagram. In this case the final circuit is simply the flip-flop connected to the tester. To create a flip flop use <code>dff ff1(d,clk,q,qn);</code>. First goes the module name, followed by the part name, which could be almost any string, followed by the wires that connect to the module in parenthesis. These must follow the order in the module&#x27;s declaration. In a structural module we use wires. Regs are not necessary because they are defined inside the different modules.</p><h2>Compiling and simulating</h2><p>Go ahead and copy/paste the modules into a text file, order doesn&#x27;t matter. Call the file &quot;dff.v&quot;. The .v extension is standard for Verilog files, but isn&#x27;t required by the compiler. To compile open a Command Prompt at your working directory (where you saved the file). A quick way to open a command prompt at any directory is to hold shift and right-click the folder, then click &quot;Open Command Window Here&quot;. Type:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">iverilog -o dff dff.v</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The &quot;-o&quot; tells Icarus Verilog to &quot;save output to the following file&quot;. The output is then saved to &quot;dff&quot;. This file is not executable. It has to be run using vvp, the Icarus Verilog simulator which is the one that actually produces simulation results, zeros and ones for each of the model variables, as a function of time. To run the simulation type:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">vvp dff</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is what outputs the dff.vcd file with all the simulation results. However if you open this file with your text editor you&#x27;ll see it&#x27;s not easy to understand. To generate an easy-to-understand timing diagram from this file we use GTKWave.</p><p>GTKWave does have a GUI. To open it press Windows key and type &quot;gtkwave&quot;. Then click File -<!-- -->&gt;<!-- --> Open New Tab and chose the ffd.vcd file. Now you must add the variables in order to see their timing diagram. Click on &quot;testbench&quot; at the left (SST panel) and then select all the variables using Ctrl or Shift and &quot;Insert&quot; them.</p><p>If everything is okay you should get a timing diagram exactly as the one at the beggining of the tutorial, just like the following:</p><img loading="lazy" class="aligncenter size-large wp-image-143" alt="Icarus Verilog simulation results shown using GTKWave" src="http://localhost:8888/cid/wp-content/uploads/2013/08/simulation2-640x264.png" width="640" height="264" class="img_ev3q"><p>When testing your programs you&#x27;ll have to go to the compiling-simulating-loading process every few minutes. Remember you can use the up-down arrow keys while in the command prompt to access the last commands and compile/simulate. On GTKWave use File-&gt;Reload Waveform to reload the .vcd file and refresh the timing diagrams without having to reload each variable. By using these tips the whole proccess will take you a few seconds.</p><p>It&#x27;s over. Now feel free to change the code around to see what happens. Mastering the use of delays, wires and regs takes some time. See <a href="http://www.asic-world.com/verilog/verilog_one_day.html" target="_blank" rel="noopener noreferrer" title="Verilog in One Day">Verilog in One Day</a> for a more in depth explanation of the language.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/icarus">icarus</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/verilog">verilog</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/windows">windows</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/hdl">hdl</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social Media</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/josedvq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/josedvq" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tungsten-hedge-174.notion.site/Recipes-32ae4a9baac6463992487190d5baa0ff" target="_blank" rel="noopener noreferrer" class="footer__link-item">My recipes blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Jose Vargas. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ffa9b863.js"></script>
<script src="/assets/js/main.a6941c66.js"></script>
</body>
</html>